(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{271:function(e,t,a){},300:function(e,t,a){e.exports=a.p+"static/media/car-marker.c37c7a43.png"},445:function(e,t,a){e.exports=a(847)},847:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"UPDATE_VEHICLES",function(){return S}),a.d(n,"RT_UPDATE_VEHICLES",function(){return O}),a.d(n,"REALTIME",function(){return j}),a.d(n,"CLEAR_DEVICES",function(){return M}),a.d(n,"fetchVehicles",function(){return x}),a.d(n,"updateVehicles",function(){return T}),a.d(n,"rtUpdateVehicles",function(){return P});var i=a(0),r=a.n(i),o=a(36),l=a.n(o),s=a(14),c=a(15),d=a(17),h=a(16),u=a(18),m=a(407),p=a(95),g=a(50),v=a(147),f=a(442),E=a(13),b=a(441),y=a.n(b),C=a(78),w=a(409),k=a.n(w),S="UPDATE_VEHICLES",O="RT_UPDATE_VEHICLES",j="SET_REALTIME",M="CLEAR_DEVICES",D="dd7295fa-6c65-484d-b38d-30df3bc31c0c",x=function(e,t){return function(a){return k.a.get("./data.json",{params:{since:e,until:t}}).then(function(e){var t=e.data&&e.data.devices;t&&t[D]?a(T(t[D])):console.warn("Vehicle data not found for ID: ".concat(D))}).catch(function(e){throw console.error("Error fetching vehicle data:",e),e})}},T=function(e){return{type:S,vehicles:e}},P=function(e){return{type:O,vehicles:e}},N={vehicles:[]},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:case O:return Object(C.a)({},e,{vehicles:e.vehicles.concat(t.vehicles)});case M:return Object(C.a)({},e,{vehicles:[]});default:return e}},A=Object(p.combineReducers)({vehicles:I}),L=a(33),R=a(3),_=a.n(R),B=a(437),V=a.n(B),F=a(40),W=a.n(F),U=a(64),G=a.n(U),z=a(208),Q=a.n(z),q=a(127),H=a.n(q),Y=a(439),X=a.n(Y),K=a(438),J=a.n(K),Z=a(440),$=a.n(Z),ee=a(410),te=a(205),ae=a.n(te),ne=a(206),ie=a.n(ne),re=a(170),oe=a.n(re),le=a(171),se=a.n(le),ce=a(172),de=a.n(ce),he=a(207),ue=a.n(he),me=a(168),pe=a.n(me),ge=a(169),ve=a.n(ge),fe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={pos:0},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.pos!==this.props.pos&&this.setState({pos:e.pos})}},{key:"render",value:function(){return r.a.createElement(ae.a,{width:"99%",height:"80%"},r.a.createElement(ie.a,{data:this.props.vehicles.vehicles,syncId:"anyId"},r.a.createElement(ve.a,{x:this.props.pos,stroke:"red",label:""}),r.a.createElement(se.a,{dataKey:"timestamp",tick:!1}),r.a.createElement(de.a,null),r.a.createElement(ue.a,{vertical:!1,strokeDasharray:"3 3"}),r.a.createElement(pe.a,null),r.a.createElement(oe.a,{type:"monotone",dataKey:"rssi",stroke:"#82ca9d"})))}}]),t}(i.Component),Ee=Object(g.connect)(function(e){return{vehicles:e.vehicles}})(fe);var be=Object(g.connect)(function(e){return{vehicles:e.vehicles}})(function(e){var t=e.pos;return r.a.createElement(ae.a,{width:"99%",height:"80%"},r.a.createElement(ie.a,{data:e.vehicles.vehicles,syncId:"anyId"},r.a.createElement(se.a,{label:"Time",dataKey:"timestamp",tick:!1}),r.a.createElement(de.a,null),r.a.createElement(ue.a,{vertical:!1,strokeDasharray:"3 3"}),r.a.createElement(pe.a,null),r.a.createElement(ve.a,{x:t,stroke:"red"}),r.a.createElement(oe.a,{type:"monotone",dataKey:"speed",stroke:"#82ca9d"})))}),ye=a(301),Ce=a(302),we=a(303),ke=a(115),Se=a(116),Oe=a(117),je=a(311),Me=a(10),De=a.n(Me),xe=a(417),Te=a(20),Pe=a.n(Te),Ne=a(418),Ie=a.n(Ne),Ae=a(269),Le=a.n(Ae),Re=a(271),_e=a.n(Re);var Be=function(e){function t(t){return{borderRadius:2,width:"20%",height:"".concat(25*t,"%"),background:e.strength>=25*(t-1)+10?"red":"lightgrey"}}return r.a.createElement("div",{style:{width:50,height:20,padding:"5px",marginLeft:"10px",display:"flex",alignItems:"flex-end",justifyContent:"space-between",borderRadius:2}},r.a.createElement("div",{style:t(1)}),r.a.createElement("div",{style:t(2)}),r.a.createElement("div",{style:t(3)}),r.a.createElement("div",{style:t(4)}))},Ve=a(27),Fe=a(32),We=a.n(Fe),Ue=a(848),Ge=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleChangedtFrom=function(e){a.setState({dtFrom:e})},a.handleChangedtTo=function(e){a.setState({dtTo:e})},a.state={open:!1,dtFrom:Object(Ue.a)(new Date("2018-12-05T03:17-08:00"),"MM/dd/yyyy hh:mm a"),dtTo:Object(Ue.a)(new Date("2018-12-17T03:45-08:00"),"MM/dd/yyyy hh:mm a"),selectedDate:new Date("2018-01-01T00:00:00.000Z")},a.handleChangedtFrom=a.handleChangedtFrom.bind(Object(Ve.a)(Object(Ve.a)(a))),a.handleChangedtTo=a.handleChangedtTo.bind(Object(Ve.a)(Object(Ve.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=(t.selectedDate,t.dtFrom),n=t.dtTo,o=this.props.classes;return r.a.createElement("form",{className:o.container,noValidate:!0},r.a.createElement(i.Fragment,null,r.a.createElement("div",{className:"picker"},r.a.createElement(v.a,{value:a,onChange:this.handleChangedtFrom,className:o.textField,id:"from",label:"From",format:"MM/dd/yyyy hh:mm a"})),r.a.createElement("div",{className:"picker"},r.a.createElement(v.a,{value:n,onChange:this.handleChangedtTo,id:"to",label:"To",format:"MM/dd/yyyy hh:mm a"}))),r.a.createElement("div",null,r.a.createElement(We.a,{color:"secondary",onClick:function(){return e.props.submit(e.state.dtFrom,e.state.dtTo)},variant:"contained",className:o.button},"Go")))}}]),t}(r.a.Component),ze=Object(E.withStyles)(function(e){return{container:{display:"flex",padding:e.spacing.unit,marginBottom:1,width:"100%"},button:{margin:e.spacing.unit},leftIcon:{marginRight:e.spacing.unit},rightIcon:{marginLeft:e.spacing.unit},iconSmall:{fontSize:20},label:{padding:5,marginBottom:e.spacing.unit},txtField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:200,color:"white"}}})(Ge),Qe=a(57),qe=a.n(Qe),He=a(59),Ye=a.n(He),Xe=a(58),Ke=a.n(Xe),Je=a(76),Ze=a.n(Je),$e=a(75),et=a.n($e),tt=a(63),at=a.n(tt),nt=a(79),it=a.n(nt),rt=a(137),ot=a.n(rt),lt=a(138),st=a.n(lt),ct=a(209),dt=a.n(ct),ht=[{id:"deviceManager",name:"Device Manager Button"},{id:"infoPanel",name:"Info Panel (Speed/Signal)"},{id:"videoPlayer",name:"Video Player"}],ut=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).state={open:!1},a.handleClickOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.handleToggle=function(e){return function(){var t=a.props,n=t.visibleControls;(0,t.onVisibilityChange)(e,!n[e])}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.visibleControls,i=this.state.open;return r.a.createElement("div",null,r.a.createElement(Pe.a,{className:a.managerButton,onClick:this.handleClickOpen},r.a.createElement(dt.a,null)),r.a.createElement(qe.a,{open:i,onClose:this.handleClose,"aria-labelledby":"map-controls-manager-title"},r.a.createElement(Ze.a,{id:"map-controls-manager-title"},"Manage Map Controls"),r.a.createElement(Ke.a,{className:a.dialogContent},r.a.createElement(et.a,null,ht.map(function(t){return r.a.createElement(at.a,{key:t.id},r.a.createElement(it.a,{primary:t.name}),r.a.createElement(ot.a,null,r.a.createElement(st.a,{onChange:e.handleToggle(t.id),checked:!!n[t.id]})))}))),r.a.createElement(Ye.a,null,r.a.createElement(We.a,{onClick:this.handleClose,color:"primary"},"Close"))))}}]),t}(r.a.Component),mt=Object(E.withStyles)(function(e){return{managerButton:{position:"absolute",bottom:10*e.spacing.unit,right:e.spacing.unit,zIndex:1001,backgroundColor:"rgba(0, 0, 0, 0.5)",color:"white","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.7)"}},dialogContent:{minWidth:300}}})(ut),pt=(a(274),a(151)),gt=(new De.a.Icon({iconUrl:a(300),iconRetinaUrl:a(300),iconAnchor:[20,40],popupAnchor:[0,-35],iconSize:[40,40],shadowUrl:"./assets/images/marker-shadow.png",shadowSize:[29,40],shadowAnchor:[7,40]}),[37.774304,-122.441951]),vt={position:"relative",width:"100%",height:"100%"},ft=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleZoom=function(e){var t=e.target.getCenter(),n=t.lat,i=t.lng;a.setState({lat:n,lng:i,zoom:e.target.getZoom()})},a.onTogglePlay=function(){alert("play"),a.setState({play:!a.state.play})},a.handleControlVisibilityChange=function(e,t){a.setState(function(a){return{visibleControls:Object(C.a)({},a.visibleControls,Object(L.a)({},e,t))}})},a.mapRef=r.a.createRef(),a.state={waypoints:[],zoom:16,play:!1,visibleControls:{deviceManager:!0,infoPanel:!0,videoPlayer:!0}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){this.mapRef.current&&this.mapRef.current.leafletElement&&this.mapRef.current.leafletElement.remove()}},{key:"handleClick",value:function(e){}},{key:"render",value:function(){var e=this.props.vehicles.vehicles||[],t=this.state,a=t.zoom,n=t.visibleControls,i=this.props.classes,o=e.map(function(e){return[e.lat,e.long]}),l=null,s=0,c="";return o[this.props.pos]&&(gt=o[this.props.pos],s=e[this.props.pos].speed,c=e[this.props.pos].rssi,l=r.a.createElement(ye.a,{position:o[this.props.pos]},r.a.createElement(Ce.a,{className:i.popupsize},"speed: ",s,r.a.createElement("br",null)," Signal: ",c,r.a.createElement(pt.Player,{style:{width:"400px",height:"300px"},playsInline:!0,poster:"/assets/poster.png",src:"https://www.mapbox.com/bites/00188/patricia_nasa.mp4"})))),r.a.createElement(we.a,{ref:this.mapRef,center:gt,zoom:a,onClick:this.handleClick,zoomControl:!1,style:vt,attributionControl:!1,onzoom:this.handleZoom},r.a.createElement(ke.a,{url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),r.a.createElement(Se.a,{position:"bottomright"}),r.a.createElement(Oe.a,{positions:o,color:"green",weight:3,opacity:.4}),l,r.a.createElement(mt,{visibleControls:n,onVisibilityChange:this.handleControlVisibilityChange}),r.a.createElement(xe.Portal,{position:"topright"},r.a.createElement("div",null,n.deviceManager&&r.a.createElement(Pe.a,{style:{backgroundColor:"rgba(255,255,255,0.7)"},"aria-label":"Manage Devices",onClick:this.props.onOpenDeviceManager},r.a.createElement(Ie.a,null)),n.infoPanel&&r.a.createElement("div",{style:{backgroundColor:"#000",display:"flex",width:"150px",fontSize:14,color:"#fff",opacity:.7,padding:6,marginTop:8}},r.a.createElement("span",null,s," mph "),r.a.createElement(Be,{strength:25*c})," ",r.a.createElement("span",null,c," ")),n.videoPlayer&&r.a.createElement(pt.Player,{style:{width:"200px",height:"200px",marginTop:8},playsInline:!0,poster:"/assets/poster.png",src:"https://www.mapbox.com/bites/00188/patricia_nasa.mp4"}))),Le()(e,function(e,t){e.timestamp,e.type;var a,n=(a={},Object(L.a)(a,_e.a.marker,!0),Object(L.a)(a,_e.a.bus,!0),a);Object(Me.divIcon)({className:_()(n),html:"<span>".concat(t,"</span>")});return r.a.createElement(je.a,{style:{color:"red"},className:n.circle,key:t,center:[e.lat,e.long],radius:5,attribution:t},r.a.createElement(Ce.a,null,"speed:",e.speed,r.a.createElement("br",null),"time:",e.timestamp))}))}}]),t}(i.Component),Et=Object(E.withStyles)(function(e){return{root:Object(L.a)({flexGrow:1,display:"flex",height:"100vh",overflow:"auto"},"height","100%"),circle:{color:"green",backgroud:"white"},popupsize:{maxWidth:"300px",minWidth:"200px"}}})(Object(g.connect)(function(e){return{vehicles:e.vehicles}})(ft)),bt=a(419),yt=a.n(bt),Ct=a(312),wt=a.n(Ct),kt=a(421),St=a.n(kt),Ot=a(215),jt=a.n(Ot),Mt=a(304),Dt=a.n(Mt),xt=a(313),Tt=a.n(xt),Pt=a(314),Nt=a.n(Pt),It=a(214),At=a.n(It),Lt=a(420),Rt=a.n(Lt),_t=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleSlideChange=function(e,t){console.clear("media value:",t),a.setState({showPlay:!0}),a.props.click(t)},a.handlePlayStop=function(){var e=!1;a.state.showPlay?(e=!1,a.props.MediaControlChange(5)):(e=!0,a.props.MediaControlChange(-5)),a.setState({showPlay:e})},a.state={value:0,showPlay:!0},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){}},{key:"handlePlaybuttons",value:function(e){switch(e){case 0:case-1:case 1:case 9:this.props.MediaControlChange(e),this.setState({showPlay:!0})}}},{key:"render",value:function(){var e,t=this.props,a=t.classes,n=t.theme,i=t.max,o=t.value;return this.step=1,r.a.createElement(yt.a,{className:a.card},r.a.createElement("div",{className:a.details},r.a.createElement(At.a,(e={classes:{container:a.slider},value:o,min:0,max:i,step:this.step,"aria-labelledby":"slider-image",onChange:this.handleSlideChange},Object(L.a)(e,"classes",{container:a.slider,thumbIconWrapper:a.thumbIconWrapper}),Object(L.a)(e,"thumb",r.a.createElement(Rt.a,{style:{color:"#2196f3"}})),e))),r.a.createElement("div",{className:a.controls},r.a.createElement(Pe.a,{"aria-label":"First",onClick:this.handlePlaybuttons.bind(this,0)},"rtl"===n.direction?r.a.createElement(Dt.a,null):r.a.createElement(wt.a,null)),r.a.createElement(Pe.a,{"aria-label":"Previous",onClick:this.handlePlaybuttons.bind(this,-1)},"rtl"===n.direction?r.a.createElement(Tt.a,null):r.a.createElement(Nt.a,null)),this.state.showPlay?r.a.createElement(Pe.a,{"aria-label":"Play/pause",onClick:this.handlePlayStop},r.a.createElement(St.a,{className:a.playIcon})):r.a.createElement(Pe.a,{"aria-label":"stop",onClick:this.handlePlayStop},r.a.createElement(jt.a,{className:a.playIcon})),r.a.createElement(Pe.a,{"aria-label":"Next",onClick:this.handlePlaybuttons.bind(this,1)},"rtl"===n.direction?r.a.createElement(Nt.a,null):r.a.createElement(Tt.a,null)),r.a.createElement(Pe.a,{"aria-label":"Last",onClick:this.handlePlaybuttons.bind(this,9)},"rtl"===n.direction?r.a.createElement(wt.a,null):r.a.createElement(Dt.a,null))))}}]),t}(r.a.Component),Bt=Object(E.withStyles)(function(e){return{card:{width:"100%"},details:{display:"flex",flexDirection:"column"},content:{flex:"1 0 auto"},cover:{width:"100%"},controls:{width:"100%",display:"flex",justifyContent:"center"},playIcon:{height:38,width:38},slider:{padding:"22px 0px"},thumbIcon:{borderRadius:"50%"},thumbIconWrapper:{backgroundColor:"#fff"}}},{withTheme:!0})(_t),Vt=a(308),Ft=a.n(Vt),Wt=a(173),Ut=a.n(Wt),Gt=a(23),zt=a.n(Gt),Qt=a(227),qt=a.n(Qt),Ht=a(118),Yt=a.n(Ht),Xt=a(306),Kt=a.n(Xt),Jt=a(92),Zt=a(423),$t=a.n(Zt),ea=a(316),ta=a.n(ea),aa=a(226),na=a.n(aa),ia=a(307),ra=a.n(ia),oa=a(426),la=a.n(oa),sa=a(424),ca=a.n(sa),da=a(315),ha=a.n(da),ua=a(225),ma=a.n(ua),pa=a(305),ga=a.n(pa),va=a(422),fa=a.n(va),Ea=a(425),ba=a.n(Ea),ya=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).state={anchorEl:null,mobileMoreAnchorEl:null,open:!1},a.handleProfileMenuOpen=function(e){a.setState({anchorEl:e.currentTarget})},a.handleMenuClose=function(){a.setState({anchorEl:null}),a.handleMobileMenuClose()},a.handleMobileMenuOpen=function(e){a.setState({mobileMoreAnchorEl:e.currentTarget})},a.handleMobileMenuClose=function(){a.setState({mobileMoreAnchorEl:null})},a.toggleDrawer=function(){return function(){a.setState({open:!a.state.open})}},a.handleRealTimeClick=function(){a.props.realtimeclick(!a.props.realtime)},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.anchorEl,a=e.mobileMoreAnchorEl,n=this.props.classes,i=Boolean(t),o=Boolean(a),l=r.a.createElement("div",{className:n.list},r.a.createElement(et.a,null,["Bookmarks","Filters","DataSources","Reports"].map(function(e,t){return r.a.createElement(at.a,{button:!0,key:e},r.a.createElement(ma.a,null,t%2===0?r.a.createElement(ga.a,null):r.a.createElement(na.a,null)),r.a.createElement(it.a,{primary:e}))})),r.a.createElement(ha.a,null),r.a.createElement(et.a,null,["History","Settings"].map(function(e,t){return r.a.createElement(at.a,{button:!0,key:e},r.a.createElement(ma.a,null,t%2===0?r.a.createElement(ga.a,null):r.a.createElement(na.a,null)),r.a.createElement(it.a,{primary:e}))})),r.a.createElement(ha.a,null),r.a.createElement(at.a,{button:!0,onClick:this.props.onOpenServerSettings},r.a.createElement(ma.a,null,r.a.createElement(fa.a,null)),r.a.createElement(it.a,{primary:"Server Settings"}))),s=r.a.createElement(Kt.a,{anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:i,onClose:this.handleMenuClose},r.a.createElement(Yt.a,{onClick:this.handleMenuClose},"Profile"),r.a.createElement(Yt.a,{onClick:this.handleMenuClose},"My account")),c=r.a.createElement(Kt.a,{anchorEl:a,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:o,onClose:this.handleMobileMenuClose},r.a.createElement(Yt.a,null,r.a.createElement(Pe.a,{color:"inherit"},r.a.createElement(qt.a,{badgeContent:4,color:"secondary"},r.a.createElement(na.a,null))),r.a.createElement("p",null,"Messages")),r.a.createElement(Yt.a,null,r.a.createElement(Pe.a,{color:"inherit"},r.a.createElement(qt.a,{badgeContent:11,color:"secondary"},r.a.createElement(ra.a,null))),r.a.createElement("p",null,"Notifications")),r.a.createElement(Yt.a,{onClick:this.handleProfileMenuOpen},r.a.createElement(Pe.a,{color:"inherit"},r.a.createElement(ta.a,null)),r.a.createElement("p",null,"Profile")));return r.a.createElement("div",{className:n.root},r.a.createElement(Ft.a,{position:"static",className:n.bar},r.a.createElement(Ut.a,{className:n.bar},r.a.createElement(Pe.a,{onClick:this.toggleDrawer("left",!0),className:n.menuButton,color:"inherit","aria-label":"Open drawer"},r.a.createElement($t.a,null)),r.a.createElement(zt.a,{className:n.title,variant:"h5",color:"inherit",noWrap:!0},"Mars Geo Tracker"),r.a.createElement(ca.a,{open:this.state.open,onClose:this.toggleDrawer("left",!1)},r.a.createElement("div",{tabIndex:0,role:"button",onClick:this.toggleDrawer("left",!0),onKeyDown:this.toggleDrawer("left",!1)},r.a.createElement(Ft.a,{position:"static",color:"primary"},r.a.createElement(Ut.a,null,r.a.createElement(zt.a,{className:n.title,variant:"h8",color:"inherit",noWrap:!0},"Mars Geo Tracker"))),l)),r.a.createElement("div",{className:n.grow}),r.a.createElement("div",{className:n.sectionDesktop},r.a.createElement(ze,{submit:this.props.submit}),r.a.createElement(Pe.a,{color:"inherit",style:{color:this.props.realtime?"red":"inherit"},onClick:this.handleRealTimeClick},r.a.createElement(ba.a,null)),r.a.createElement(Pe.a,{color:"inherit"},r.a.createElement(qt.a,{badgeContent:11,color:"secondary"},r.a.createElement(ra.a,null))),r.a.createElement(Pe.a,{"aria-owns":i?"material-appbar":void 0,"aria-haspopup":"true",onClick:this.handleProfileMenuOpen,color:"inherit"},r.a.createElement(ta.a,null))),r.a.createElement("div",{className:n.sectionMobile},r.a.createElement(Pe.a,{"aria-haspopup":"true",onClick:this.handleMobileMenuOpen,color:"inherit"},r.a.createElement(la.a,null))))),s,c)}}]),t}(r.a.Component),Ca=Object(E.withStyles)(function(e){return{root:{width:"100%"},bar:{height:"48px"},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},title:Object(L.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),drawerTitle:{paddingLeft:2*e.spacing.unit,paddingRight:2*e.spacing.unit},search:Object(L.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Jt.fade)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(Jt.fade)(e.palette.common.white,.25)},marginRight:2*e.spacing.unit,marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:3*e.spacing.unit,width:"auto"}),searchIcon:{width:9*e.spacing.unit,height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:Object(L.a)({paddingTop:e.spacing.unit,paddingRight:e.spacing.unit,paddingBottom:e.spacing.unit,paddingLeft:10*e.spacing.unit,transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:200}),sectionDesktop:{display:"flex",alignItems:"center"},sectionMobile:Object(L.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})}})(ya),wa=function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.pos,a=e.classes,n=t;return r.a.createElement("div",{className:a.grd},r.a.createElement(W.a,{className:a.paper},r.a.createElement(zt.a,{variant:"subtitle2",gutterBottom:!0},"Signal Strength"),r.a.createElement(Ee,{pos:n})),r.a.createElement(W.a,{className:a.paper},r.a.createElement(zt.a,{variant:"subtitle2",gutterBottom:!0},"Speed"),r.a.createElement(be,{pos:n})),r.a.createElement(W.a,{className:a.paper},r.a.createElement(zt.a,{variant:"subtitle2",gutterBottom:!0},"Acceleration"),r.a.createElement(be,{pos:n})))}}]),t}(r.a.Component),ka=Object(E.withStyles)(function(e){return{grd:{height:"100%",padding:e.spacing.unit,display:"flex",flexDirection:"column"},left:{textAlign:"center"},paper:{flex:1,display:"flex",flexDirection:"column",textAlign:"left",color:e.palette.text.secondary,margin:"0 2px 2px"}}})(Object(g.connect)(function(e){return{vehicles:e.vehicles}})(wa)),Sa=a(427),Oa=a.n(Sa),ja=function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=(e.vehicles.vehicles||[]).length>0?[{id:"dd7295fa-6c65-4d-b38d-30df3bc31c0c",src:"https://www.mapbox.com/bites/00188/patricia_nasa.mp4"}]:[];return r.a.createElement("div",{className:t.root},r.a.createElement(G.a,{container:!0,spacing:16},a.length>0?a.map(function(e){return r.a.createElement(G.a,{item:!0,xs:12,sm:6,key:e.id},r.a.createElement(W.a,{className:t.videoPaper},r.a.createElement(pt.Player,{playsInline:!0,poster:"/assets/poster.png",src:e.src},r.a.createElement(pt.BigPlayButton,{position:"center"})),r.a.createElement(zt.a,{variant:"caption",display:"block",gutterBottom:!0},"Device: ",e.id.substring(0,8),"...")))}):Array.from(new Array(4)).map(function(e,a){return r.a.createElement(G.a,{item:!0,xs:12,sm:6,key:a},r.a.createElement(W.a,{className:t.videoPaper},r.a.createElement("div",{className:t.placeholder},r.a.createElement("div",{className:t.placeholderContent},r.a.createElement(Oa.a,{className:t.icon}),r.a.createElement(zt.a,{variant:"subtitle1"},"No Device Feed"))),r.a.createElement(zt.a,{variant:"caption",display:"block",gutterBottom:!0},"Placeholder ",a+1)))})))}}]),t}(r.a.Component),Ma=Object(E.withStyles)(function(e){return{root:{flexGrow:1,padding:2*e.spacing.unit,height:"100%",overflowY:"auto"},videoPaper:{padding:e.spacing.unit,textAlign:"center",color:e.palette.text.secondary},placeholder:{width:"100%",paddingTop:"56.25%",backgroundColor:e.palette.grey[200],position:"relative"},placeholderContent:{position:"absolute",top:0,left:0,bottom:0,right:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:e.palette.grey[500]},icon:{fontSize:48,marginBottom:e.spacing.unit}}})(Object(g.connect)(function(e){return{vehicles:e.vehicles}})(ja)),Da=a(443),xa=a(37),Ta=a.n(xa),Pa=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleChangeMessage=function(e){a.setState({message:{msg:e.target.value,dt:a.getTime()}})},a.handleSendMessage=function(e){a.setState({messages:[].concat(Object(Da.a)(a.state.messages),[a.state.message])})},a.state={open:!1,messages:[],message:{msg:"",dt:""}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"getTime",value:function(){function e(e){return e<10?"0"+e:e}var t=new Date;return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())}},{key:"render",value:function(){var e=this.state,t=e.messages,a=e.message,n=this.props.classes,i=t.map(function(e,t){return r.a.createElement("div",{key:t}," ",r.a.createElement("span",null,e.dt),r.a.createElement("br",null),r.a.createElement("span",{className:n.name},"You:")," ",r.a.createElement("br",null)," ",r.a.createElement("span",{className:n.message},e.msg)," ")});return r.a.createElement("form",{className:n.container,noValidate:!0},r.a.createElement("div",{className:n.demo},r.a.createElement(W.a,{className:n.cheight},i),r.a.createElement(W.a,null,r.a.createElement("div",{className:n.msgDiv},r.a.createElement(Ta.a,{id:"Message",label:"Message",style:{margin:8},value:a.msg,placeholder:"Halo",helperText:"",fullWidth:!0,margin:"normal",onChange:this.handleChangeMessage,InputLabelProps:{shrink:!0}}),r.a.createElement(We.a,{color:"secondary",onClick:this.handleSendMessage,variant:"contained",className:n.button},"  Send ")))))}}]),t}(r.a.Component),Na=Object(E.withStyles)(function(e){return{container:{display:"flex",padding:e.spacing.unit,marginBottom:1,width:"100%",height:"80%"},demo:{width:"100%",padding:e.spacing.unit},button:{margin:e.spacing.unit},leftIcon:{marginRight:e.spacing.unit},rightIcon:{marginLeft:e.spacing.unit},iconSmall:{fontSize:20},label:{padding:5,marginBottom:e.spacing.unit},msgDiv:{width:"100%",display:"flex"},txtField:{},paper:{},cheight:{height:"80%",overflowY:"scroll"},name:{color:"blue"},message:{color:"red"}}})(Pa),Ia="https://aec13c29c46a.ngrok-free.app",Aa="",La="",Ra="",_a="wss://c22d3035.ala.us-east-1.emqxsl.com:8084",Ba={username:"Botler",password:"Botler",path:"/mqtt"},Va="joystick/moves",Fa="robot/arm",Wa="robot/gripper",Ua={qos:1,retain:!1},Ga=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).state={base:90,shoulder:90,elbow:90,wristPitch:90,wristRoll:90,gripper:0},a.handleChange=function(e){return function(t,n){a.setState(Object(L.a)({},e,n)),console.log("Arm Control - ".concat(e,": ").concat(n))}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"renderSlider",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:240,i=this.props.classes;return r.a.createElement("div",{className:i.sliderContainer},r.a.createElement(zt.a,{className:i.label,id:"".concat(t,"-label")},e),r.a.createElement(At.a,{className:i.slider,value:this.state[t],min:a,max:n,onChange:this.handleChange(t),"aria-labelledby":"".concat(t,"-label")}))}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.root},r.a.createElement(zt.a,{variant:"caption",color:"inherit"},"6-DOF Arm"),this.renderSlider("Base","base"),this.renderSlider("Shoulder","shoulder"),this.renderSlider("Elbow","elbow"),this.renderSlider("Wrist Pitch","wristPitch"),this.renderSlider("Wrist Roll","wristRoll"),this.renderSlider("Gripper","gripper",0,100))}}]),t}(r.a.Component),za=Object(E.withStyles)(function(e){return{root:{width:150,color:"white",display:"flex",flexDirection:"column",alignItems:"center"},sliderContainer:{width:"100%",padding:"0 10px",boxSizing:"border-box"},slider:{padding:"10px 0"},label:{fontSize:"0.75rem",color:"inherit",textAlign:"left",width:"100%"}}})(Ga),Qa=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleDragStart=function(e){a.joystick.isDragging=!0,"touchstart"===e.type?(e.preventDefault(),window.addEventListener("touchmove",a.handleDragMove,{passive:!1}),window.addEventListener("touchend",a.handleDragEnd),window.addEventListener("touchcancel",a.handleDragEnd)):(window.addEventListener("mousemove",a.handleDragMove),window.addEventListener("mouseup",a.handleDragEnd))},a.getPointerPositionInSVG=function(e,t){if(!t)return{x:0,y:0};var a=e.touches?e.touches[0].clientX:e.clientX,n=e.touches?e.touches[0].clientY:e.clientY,i=t.getBoundingClientRect();if(!t.viewBox.baseVal)return{x:0,y:0};var r=t.viewBox.baseVal.width/i.width,o=t.viewBox.baseVal.height/i.height;return{x:(a-i.left)*r,y:(n-i.top)*o}},a.handleGripperDragStart=function(e){a.gripper.isDragging=!0,"touchstart"===e.type?(e.preventDefault(),window.addEventListener("touchmove",a.handleGripperDragMove,{passive:!1}),window.addEventListener("touchend",a.handleGripperDragEnd),window.addEventListener("touchcancel",a.handleGripperDragEnd)):(window.addEventListener("mousemove",a.handleGripperDragMove),window.addEventListener("mouseup",a.handleGripperDragEnd))},a.handleGripperDragMove=function(e){if(a.gripper.isDragging){"touchmove"===e.type&&e.preventDefault();var t=a.gripper.ref.current;if(t){var n=a.getPointerPositionInSVG(e,t).x;n<10&&(n=10),n>90&&(n=90);var i=Math.abs(n-50)/40;a.updateGripperValue(i)}}},a.handleGripperDragEnd=function(){a.gripper.isDragging&&(a.gripper.isDragging=!1,window.removeEventListener("mousemove",a.handleGripperDragMove),window.removeEventListener("mouseup",a.handleGripperDragEnd),window.removeEventListener("touchmove",a.handleGripperDragMove),window.removeEventListener("touchend",a.handleGripperDragEnd),window.removeEventListener("touchcancel",a.handleGripperDragEnd))},a.updateGripperValue=function(e){var t=parseFloat(e.toFixed(2));a.setState({gripperValue:t});var n="g ".concat(t);a.props.publish(Wa,n)},a.state={gripperValue:0},a.joystick={ref:r.a.createRef(),isDragging:!1,lastPosition:null},a.gripper={ref:r.a.createRef(),isDragging:!1},a.handleDragMove=a.handleDragMove.bind(Object(Ve.a)(Object(Ve.a)(a))),a.handleDragEnd=a.handleDragEnd.bind(Object(Ve.a)(Object(Ve.a)(a))),a.handleGripperDragMove=a.handleGripperDragMove.bind(Object(Ve.a)(Object(Ve.a)(a))),a.handleGripperDragEnd=a.handleGripperDragEnd.bind(Object(Ve.a)(Object(Ve.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.joystick.ref.current;e&&(e.addEventListener("mousedown",this.handleDragStart),e.addEventListener("touchstart",this.handleDragStart,{passive:!1}));var t=this.gripper.ref.current;t&&(t.addEventListener("mousedown",this.handleGripperDragStart),t.addEventListener("touchstart",this.handleGripperDragStart,{passive:!1}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousemove",this.handleDragMove),window.removeEventListener("mouseup",this.handleDragEnd),window.removeEventListener("touchmove",this.handleDragMove),window.removeEventListener("touchend",this.handleDragEnd),window.removeEventListener("touchcancel",this.handleDragEnd),window.removeEventListener("mousemove",this.handleGripperDragMove),window.removeEventListener("mouseup",this.handleGripperDragEnd),window.removeEventListener("touchmove",this.handleGripperDragMove),window.removeEventListener("touchend",this.handleGripperDragEnd),window.removeEventListener("touchcancel",this.handleGripperDragEnd)}},{key:"handleDragMove",value:function(e){if(this.joystick.isDragging){"touchmove"===e.type&&e.preventDefault();var t=this.joystick.ref.current;if(t){var a=t.querySelector(".joystick-stick");if(a){var n=this.getPointerPositionInSVG(e,t),i=n.x-50,r=n.y-50,o=Math.sqrt(i*i+r*r),l=Math.atan2(r,i);o>20&&(o=20);var s=50+o*Math.cos(l),c=50+o*Math.sin(l);a.setAttribute("cx",s),a.setAttribute("cy",c);var d=parseFloat(((s-50)/20).toFixed(2)),h=parseFloat(((c-50)/20).toFixed(2)),u="a ".concat(d," ").concat(h);u!==this.joystick.lastPosition&&"a 0 0"!==u&&(this.props.publish(Fa,u),this.joystick.lastPosition=u)}}}}},{key:"handleDragEnd",value:function(){this.joystick.isDragging&&(this.joystick.isDragging=!1,window.removeEventListener("mousemove",this.handleDragMove),window.removeEventListener("mouseup",this.handleDragEnd),window.removeEventListener("touchmove",this.handleDragMove),window.removeEventListener("touchend",this.handleDragEnd),window.removeEventListener("touchcancel",this.handleDragEnd))}},{key:"render",value:function(){var e=this.props.classes,t=40*this.state.gripperValue,a=50-t,n=50+t;return r.a.createElement("div",{className:e.joystickContainer},r.a.createElement(zt.a,{variant:"caption",color:"inherit"},"Arm"),r.a.createElement("svg",{id:"arm-joystick",ref:this.joystick.ref,viewBox:"0 0 100 100",className:e.joystick},r.a.createElement("circle",{className:e.joystickBase,cx:"50",cy:"50",r:"40"}),r.a.createElement("circle",{className:"joystick-stick",cx:"50",cy:"50",r:"20",fill:"rgba(158, 158, 158, 0.7)",cursor:"pointer"})),r.a.createElement("div",{className:e.gripperContainer},r.a.createElement(zt.a,{variant:"caption",id:"gripper-label",color:"inherit"},"Gripper"),r.a.createElement("svg",{ref:this.gripper.ref,viewBox:"0 0 100 20",className:e.gripper},r.a.createElement("rect",{x:"10",y:"8",width:"80",height:"4",rx:"2",className:e.gripperTrack}),r.a.createElement("circle",{cx:a,cy:"10",r:"6",className:e.gripperClaw}),r.a.createElement("circle",{cx:n,cy:"10",r:"6",className:e.gripperClaw}))))}}]),t}(r.a.Component),qa=Object(E.withStyles)(function(e){return{joystickContainer:{display:"flex",flexDirection:"column",alignItems:"center",color:"white"},joystick:{width:100,height:100},joystickBase:{fill:"rgba(224, 224, 224, 0.4)",stroke:"rgba(189, 189, 189, 0.6)",strokeWidth:2},joystickStick:{fill:"rgba(158, 158, 158, 0.7)",cursor:"pointer"},gripperContainer:{display:"flex",flexDirection:"column",alignItems:"center",width:120},gripper:{width:120,height:24,cursor:"pointer"},gripperTrack:{fill:"rgba(224, 224, 224, 0.4)",stroke:"rgba(189, 189, 189, 0.6)",strokeWidth:1},gripperClaw:{fill:"rgba(158, 158, 158, 0.9)"}}})(Qa),Ha=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleDragStart=function(e){"touchstart"===e.type?(e.preventDefault(),window.addEventListener("touchmove",a.handleDragMove,{passive:!1}),window.addEventListener("touchend",a.handleDragEnd),window.addEventListener("touchcancel",a.handleDragEnd)):(window.addEventListener("mousemove",a.handleDragMove),window.addEventListener("mouseup",a.handleDragEnd)),e.target.classList.contains("joystick-stick")&&(a.joystick.isDragging=!0,a.joystick.hasDragged=!1,a.setState({isManuallyStopped:!1}))},a.getPointerPositionInSVG=function(e,t){if(!t)return{x:0,y:0};var a=e.touches?e.touches[0].clientX:e.clientX,n=e.touches?e.touches[0].clientY:e.clientY,i=t.getBoundingClientRect();if(!t.viewBox.baseVal)return{x:0,y:0};var r=t.viewBox.baseVal.width/i.width,o=t.viewBox.baseVal.height/i.height;return{x:(a-i.left)*r,y:(n-i.top)*o}},a.handleArrowClick=function(e){if(a.state.lockedArrowDirection===e)return a.setState({lockedArrowDirection:null}),a.props.publish(Va,"stop"),void(a.lastArrowClick={direction:null,time:0});var t=Date.now();if(a.lastArrowClick.direction===e&&t-a.lastArrowClick.time<400){a.setState({lockedArrowDirection:e}),a.lastArrowClick={direction:null,time:0};a.props.publish(Va,{forw:"fwx",back:"bax",left:"lex",right:"rtx"}[e])}else a.lastArrowClick={direction:e,time:t},a.props.publish(Va,e)},a.handleStop=function(){a.setState({lockedArrowDirection:null}),a.lastArrowClick={direction:null,time:0},a.props.publish(Va,"stop")},a.handleStickClick=function(){a.joystick.hasDragged||(a.setState({isManuallyStopped:!0}),a.props.publish(Va,"drstp"))},a.state={isManuallyStopped:!1},a.joystick={ref:r.a.createRef(),isDragging:!1,lastDirection:null},a.lastArrowClick={direction:null,time:0},a.handleDragMove=a.handleDragMove.bind(Object(Ve.a)(Object(Ve.a)(a))),a.handleDragEnd=a.handleDragEnd.bind(Object(Ve.a)(Object(Ve.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.joystick.ref.current;if(e){e.addEventListener("mousedown",this.handleDragStart),e.addEventListener("touchstart",this.handleDragStart,{passive:!1});var t=e.querySelector(".joystick-stick");t&&t.addEventListener("click",this.handleStickClick)}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousemove",this.handleDragMove),window.removeEventListener("mouseup",this.handleDragEnd),window.removeEventListener("touchmove",this.handleDragMove),window.removeEventListener("touchend",this.handleDragEnd),window.removeEventListener("touchcancel",this.handleDragEnd);var e=this.joystick.ref.current;if(e){var t=e.querySelector(".joystick-stick");t&&t.removeEventListener("click",this.handleStickClick)}}},{key:"handleDragMove",value:function(e){if(this.joystick.isDragging){this.joystick.hasDragged=!0,"touchmove"===e.type&&e.preventDefault();var t=this.joystick.ref.current;if(t){var a=t.querySelector(".joystick-stick");if(a){var n=this.getPointerPositionInSVG(e,t),i=n.x-50,r=n.y-50,o=Math.sqrt(i*i+r*r),l=Math.atan2(r,i);o>20&&(o=20);var s=50+o*Math.cos(l),c=50+o*Math.sin(l),d=null;Math.abs(s-50)<8&&o>5?(s=50,d=c<50?"forw":"back"):Math.abs(c-50)<8&&o>5&&(c=50,d=s>50?"right":"left"),a.setAttribute("cx",s),a.setAttribute("cy",c),d&&d!==this.joystick.lastDirection?(this.props.publish(Va,d),this.joystick.lastDirection=d):d||null===this.joystick.lastDirection||(this.props.publish(Va,"stop"),this.joystick.lastDirection=null)}}}}},{key:"handleDragEnd",value:function(){if(this.joystick.isDragging){this.joystick.isDragging=!1;var e=this.joystick.ref.current;if(e){var t=e.querySelector(".joystick-stick");t&&(t.setAttribute("cx",50),t.setAttribute("cy",50))}this.joystick.lastDirection=null,window.removeEventListener("mousemove",this.handleDragMove),window.removeEventListener("mouseup",this.handleDragEnd),window.removeEventListener("touchmove",this.handleDragMove),window.removeEventListener("touchend",this.handleDragEnd),window.removeEventListener("touchcancel",this.handleDragEnd)}}},{key:"render",value:function(){var e=this.props.classes,t=this.state.isManuallyStopped?"rgba(211, 47, 47, 0.35)":"rgba(158, 158, 158, 0.7)";return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:e.joystickContainer},r.a.createElement(zt.a,{variant:"caption",color:"inherit"},"Drive"),r.a.createElement("svg",{ref:this.joystick.ref,viewBox:"0 0 100 100",className:e.joystick},r.a.createElement("circle",{className:e.joystickBase,cx:"50",cy:"50",r:"40"}),r.a.createElement("line",{x1:"50",y1:"10",x2:"50",y2:"90",className:e.joystickAxis}),r.a.createElement("line",{x1:"10",y1:"50",x2:"90",y2:"50",className:e.joystickAxis}),r.a.createElement("circle",{className:"joystick-stick",cx:"50",cy:"50",r:"20",fill:t,cursor:"pointer"})),r.a.createElement(We.a,{variant:"contained",className:e.stopButton,onClick:this.handleStop},"STOP")))}}]),t}(r.a.Component),Ya=Object(E.withStyles)(function(e){return{joystickContainer:{display:"flex",flexDirection:"column",alignItems:"center",color:"white"},joystick:{width:100,height:100},joystickBase:{fill:"rgba(224, 224, 224, 0.4)",stroke:"rgba(189, 189, 189, 0.6)",strokeWidth:2},joystickAxis:{stroke:"rgba(255, 255, 255, 0.3)",strokeWidth:1,strokeDasharray:"2 2"},joystickStick:{fill:"rgba(158, 158, 158, 0.7)",cursor:"pointer"},stopButton:{backgroundColor:"red",color:"white",marginTop:e.spacing.unit,"&:hover":{backgroundColor:"#d32f2f"}}}})(Ha),Xa=a(428),Ka=a.n(Xa),Ja=a(431),Za=a.n(Ja),$a=a(429),en=a.n($a),tn=a(430),an=a.n(tn),nn=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleArrowClick=function(e){if(a.state.lockedArrowDirection===e)return a.setState({lockedArrowDirection:null,isManuallyStopped:!1}),a.props.publish(Va,"stop"),void(a.lastArrowClick={direction:null,time:0});var t=Date.now();if(a.lastArrowClick.direction===e&&t-a.lastArrowClick.time<400){a.setState({lockedArrowDirection:e,isManuallyStopped:!1}),a.lastArrowClick={direction:null,time:0};a.props.publish(Va,{forw:"fwx",back:"bax",left:"lex",right:"rtx"}[e])}else a.setState({isManuallyStopped:!1}),a.lastArrowClick={direction:e,time:t},a.props.publish(Va,e)},a.handleStopClick=function(){a.setState({isManuallyStopped:!0,lockedArrowDirection:null}),a.lastArrowClick={direction:null,time:0},a.props.publish(Va,"drstp")},a.state={isManuallyStopped:!1,lockedArrowDirection:null},a.lastArrowClick={direction:null,time:0},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.lockedArrowDirection;return r.a.createElement("div",{className:t.dpadContainer},r.a.createElement(zt.a,{variant:"caption",color:"inherit"},"Drive (Arrows)"),r.a.createElement("div",{className:t.arrowButtonContainer},r.a.createElement("div",{style:{gridColumn:2,gridRow:1}},r.a.createElement(Pe.a,{color:"forw"===a?"secondary":"inherit",className:t.arrowButton,onClick:function(){return e.handleArrowClick("forw")}},r.a.createElement(Ka.a,null))),r.a.createElement("div",{style:{gridColumn:2,gridRow:2}},r.a.createElement(Pe.a,{className:t.stopButton,onClick:this.handleStopClick},r.a.createElement(jt.a,null))),r.a.createElement("div",{style:{gridColumn:1,gridRow:2}},r.a.createElement(Pe.a,{color:"left"===a?"secondary":"inherit",className:t.arrowButton,onClick:function(){return e.handleArrowClick("left")}},r.a.createElement(en.a,null))),r.a.createElement("div",{style:{gridColumn:3,gridRow:2}},r.a.createElement(Pe.a,{color:"right"===a?"secondary":"inherit",className:t.arrowButton,onClick:function(){return e.handleArrowClick("right")}},r.a.createElement(an.a,null))),r.a.createElement("div",{style:{gridColumn:2,gridRow:3}},r.a.createElement(Pe.a,{color:"back"===a?"secondary":"inherit",className:t.arrowButton,onClick:function(){return e.handleArrowClick("back")}},r.a.createElement(Za.a,null)))))}}]),t}(r.a.Component),rn=Object(E.withStyles)(function(e){return{dpadContainer:{display:"flex",flexDirection:"column",alignItems:"center",color:"white"},arrowButtonContainer:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"repeat(3, 1fr)",width:120,height:120,alignItems:"center",justifyItems:"center"},arrowButton:{color:"#9e9e9e",backgroundColor:"rgba(0, 0, 0, 0.1)","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.2)"}},stopButton:{color:"#9e9e9e",backgroundColor:"rgba(224, 224, 224, 0.4)","&:hover":{backgroundColor:"rgba(189, 189, 189, 0.6)"}}}})(nn),on=a(432),ln=a.n(on),sn=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleEEDragStart=function(e){e.preventDefault(),a.setState({dragging:{type:"ee"}}),document.addEventListener("mousemove",a._onEEMouseMove),document.addEventListener("mouseup",a._onEEUp),document.addEventListener("touchmove",a._onEEMouseMove,{passive:!1}),document.addEventListener("touchend",a._onEEUp)},a.handlePointerDown=function(e,t){var n=t.touches&&t.touches[0],i=n?n.clientX:t.clientX,r=n?n.clientY:t.clientY;t.preventDefault(),a.startDrag(e,i,r)},a.reset=function(){a.setState({angles:[0,0,0,0,0,0]})},a.state={angles:[0,.2,-.3,.1,-.2,.15],dragging:null},a.svgRef=r.a.createRef(),a._onMouseMove=a._onMouseMove.bind(Object(Ve.a)(Object(Ve.a)(a))),a._onMouseUp=a._onMouseUp.bind(Object(Ve.a)(Object(Ve.a)(a))),a._onEEMouseMove=a._onEEMouseMove.bind(Object(Ve.a)(Object(Ve.a)(a))),a._onEEUp=a._onEEUp.bind(Object(Ve.a)(Object(Ve.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){document.removeEventListener("mousemove",this._onMouseMove),document.removeEventListener("mouseup",this._onMouseUp),document.removeEventListener("touchmove",this._onMouseMove),document.removeEventListener("touchend",this._onMouseUp),document.removeEventListener("mousemove",this._onEEMouseMove),document.removeEventListener("mouseup",this._onEEUp),document.removeEventListener("touchmove",this._onEEMouseMove),document.removeEventListener("touchend",this._onEEUp)}},{key:"computePositions",value:function(){for(var e=this.props,t=e.base,a=e.lengths,n=this.state.angles,i=[{x:t.x,y:t.y}],r=t.x,o=t.y,l=0,s=0;s<a.length;s++){l+=n[s];var c=r+Math.cos(l)*a[s],d=o+Math.sin(l)*a[s];i.push({x:c,y:d}),r=c,o=d}return i}},{key:"startDrag",value:function(e,t,a){var n=this.computePositions()[e],i=this.svgRef.current.getBoundingClientRect(),r=t-i.left,o=a-i.top,l=Math.atan2(o-n.y,r-n.x);this.setState({dragging:{type:"joint",idx:e,startMouseAngle:l,startAngle:this.state.angles[e]||0,pivotClient:n}}),document.addEventListener("mousemove",this._onMouseMove),document.addEventListener("mouseup",this._onMouseUp),document.addEventListener("touchmove",this._onMouseMove,{passive:!1}),document.addEventListener("touchend",this._onMouseUp)}},{key:"_onMouseMove",value:function(e){if(this.state.dragging&&"joint"===this.state.dragging.type){e.preventDefault&&e.preventDefault();var t=e.touches&&e.touches[0],a=t?t.clientX:e.clientX,n=t?t.clientY:e.clientY,i=this.svgRef.current.getBoundingClientRect(),r=a-i.left,o=n-i.top,l=this.state.dragging,s=l.idx,c=l.startMouseAngle,d=l.startAngle,h=l.pivotClient,u=Math.atan2(o-h.y,r-h.x)-c;this.setState(function(e){var t=e.angles.slice();return t[s]=d+u,{angles:t}})}}},{key:"_onMouseUp",value:function(){this.state.dragging&&"joint"===this.state.dragging.type&&(this.setState({dragging:null}),document.removeEventListener("mousemove",this._onMouseMove),document.removeEventListener("mouseup",this._onMouseUp),document.removeEventListener("touchmove",this._onMouseMove),document.removeEventListener("touchend",this._onMouseUp))}},{key:"_onEEMouseMove",value:function(e){if(this.state.dragging&&"ee"===this.state.dragging.type){e.preventDefault&&e.preventDefault();var t=e.touches&&e.touches[0],a=t?t.clientX:e.clientX,n=t?t.clientY:e.clientY,i=this.svgRef.current.getBoundingClientRect(),r=a-i.left,o=n-i.top;this.solveIK(r,o)}}},{key:"_onEEUp",value:function(){this.state.dragging&&"ee"===this.state.dragging.type&&(this.setState({dragging:null}),document.removeEventListener("mousemove",this._onEEMouseMove),document.removeEventListener("mouseup",this._onEEUp),document.removeEventListener("touchmove",this._onEEMouseMove),document.removeEventListener("touchend",this._onEEUp))}},{key:"solveIK",value:function(e,t){for(var a=this.props.lengths.length,n=this.state.angles.slice(),i=0;i<5;i++)for(var r=a-2;r>=0;r--){var o=this.computePositions(),l=o[r],s=o[a],c={x:s.x-l.x,y:s.y-l.y},d={x:e-l.x,y:t-l.y},h=Math.atan2(c.y,c.x),u=Math.atan2(d.y,d.x)-h;u=Math.max(-.5,Math.min(.5,u)),n[r]+=u,this.setState({angles:n})}}},{key:"render",value:function(){for(var e=this,t=this.props,a=t.width,n=t.height,i=t.jointRadius,o=this.computePositions(),l=[],s=0;s<o.length-1;s++)l.push(r.a.createElement("line",{key:"link-"+s,x1:o[s].x,y1:o[s].y,x2:o[s+1].x,y2:o[s+1].y,stroke:"#222",strokeWidth:4,strokeLinecap:"round"}));for(var c=[],d=function(t){var a=o[t],n=o[t+1];c.push(r.a.createElement("g",{key:"joint-"+t},r.a.createElement("circle",{cx:a.x,cy:a.y,r:i,fill:"#fff",stroke:"#111",strokeWidth:1.5,style:{cursor:"grab"},onMouseDown:function(a){return e.handlePointerDown(t,a)},onTouchStart:function(a){return e.handlePointerDown(t,a)}}),r.a.createElement("line",{x1:a.x,y1:a.y,x2:n.x,y2:n.y,stroke:"#888",strokeWidth:2,strokeDasharray:"3 3"})))},h=0;h<6;h++)d(h);var u=o[o.length-1];return r.a.createElement("svg",{ref:this.svgRef,width:a,height:n,style:{background:"transparent"}},r.a.createElement("foreignObject",{x:o[0].x-12,y:o[0].y+i+10,width:"24",height:"24",onClick:this.reset,style:{cursor:"pointer"}},r.a.createElement(ln.a,{style:{color:"white",opacity:.7}})),r.a.createElement("g",{stroke:"#fff","stroke-opacity":"0.7"},l),r.a.createElement("g",null,c),r.a.createElement("circle",{cx:u.x,cy:u.y,r:8,fill:"#ff5c5c",stroke:"#a33",strokeWidth:1.5,style:{cursor:"grab"},onMouseDown:this.handleEEDragStart,onTouchStart:this.handleEEDragStart}),r.a.createElement("rect",{x:o[0].x-(i+2),y:o[0].y-(i+2),width:2*(i+2),height:2*(i+2),rx:"4",fill:"#fff"}))}}]),t}(r.a.Component);sn.defaultProps={width:600,height:400,base:{x:100,y:300},lengths:[15,60,50,40,35,30],jointRadius:10};var cn=sn,dn=a(433),hn=a.n(dn),un=[{id:"armJoystick",name:"Arm Joystick"},{id:"arm6DOF",name:"6-DOF Arm Sliders"},{id:"sixDoFArm",name:"SVG Arm Control"},{id:"dpad",name:"D-pad Controls"},{id:"driveControls",name:"Drive Controls"}],mn=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).state={open:!1},a.handleClickOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.handleToggle=function(e){return function(){var t=a.props,n=t.visibleControls;(0,t.onVisibilityChange)(e,!n[e])}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.visibleControls,i=this.state.open;return r.a.createElement("div",null,r.a.createElement(Pe.a,{className:a.managerButton,onClick:this.handleClickOpen},r.a.createElement(dt.a,null)),r.a.createElement(qe.a,{open:i,onClose:this.handleClose,"aria-labelledby":"controls-manager-title"},r.a.createElement(Ze.a,{id:"controls-manager-title"},"Manage Controls"),r.a.createElement(Ke.a,{className:a.dialogContent},r.a.createElement(et.a,null,un.map(function(t){return r.a.createElement(at.a,{key:t.id},r.a.createElement(it.a,{primary:t.name}),r.a.createElement(ot.a,null,r.a.createElement(st.a,{onChange:e.handleToggle(t.id),checked:!!n[t.id]})))}))),r.a.createElement(Ye.a,null,r.a.createElement(We.a,{onClick:this.handleClose,color:"primary"},"Close"))))}}]),t}(r.a.Component),pn=Object(E.withStyles)(function(e){return{managerButton:{color:"white"},dialogContent:{minWidth:300}}})(mn),gn=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleError=function(e){e&&(console.error("[Vonage Video Error]:",e),alert("Video Error: ".concat(e.message)))},a.initializeSession=function(){Aa&&La&&Ra?"undefined"!==typeof window.OT?(a.session=window.OT.initSession(Aa,La),a.session.on("streamCreated",function(e){a.session.subscribe(e.stream,"subscriber",{insertMode:"replace",width:"100%",height:"100%"},a.handleError)}),a.publisher=window.OT.initPublisher("publisher",{insertMode:"replace",width:"100%",height:"100%",resolution:"640x480",frameRate:15,publishVideo:a.state.isPublishing},a.handleError),a.session.connect(Ra,function(e){e?a.handleError(e):(a.session.publish(a.publisher,a.handleError),a.setState({sessionStarted:!0}))})):alert("OpenTok.js library is not loaded. Please check public/index.html."):Ia?alert("Vonage API credentials are not set in src/config.js. Server fetching not yet implemented in this component."):alert("Vonage API credentials are not set in src/config.js. Cannot start video session.")},a.initializeMqtt=function(){"undefined"!==typeof window.mqtt?(console.log("Initializing MQTT..."),a.mqttClient=window.mqtt.connect(_a,Ba),a.mqttClient.on("connect",function(){return console.log("Connected to MQTT broker")}),a.mqttClient.on("error",function(e){return console.error("MQTT Connection error: ",e)})):alert("MQTT.js library is not loaded.")},a.publishMqtt=function(e,t){a.mqttClient&&a.mqttClient.connected?(console.log("MQTT OUT [".concat(e,"]: ").concat(t)),a.mqttClient.publish(e,t,Ua)):console.warn("MQTT not connected. Cannot publish to ".concat(e,"."))},a.handlePublishVideo=function(e){a.publisher&&(a.publisher.publishVideo(e),a.setState({isPublishing:e}))},a.handleControlVisibilityChange=function(e,t){a.setState(function(a){return{visibleControls:Object(C.a)({},a.visibleControls,Object(L.a)({},e,t))}})},a.togglePublisherWindow=function(){a.setState(function(e){return{showPublisher:!e.showPublisher}})},a.state={sessionStarted:!1,isPublishing:!1,showPublisher:!1,visibleControls:{armJoystick:!0,arm6DOF:!0,sixDoFArm:!1,dpad:!0,driveControls:!1}},a.session=null,a.publisher=null,a.mqttClient=null,a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.initializeMqtt()}},{key:"componentWillUnmount",value:function(){this.session&&this.session.disconnect(),this.mqttClient&&this.mqttClient.end()}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.sessionStarted,n=(t.isPublishing,t.visibleControls);return r.a.createElement("div",{className:e.root},r.a.createElement("div",{id:"videos",className:e.videos},r.a.createElement("div",{id:"subscriber",className:e.subscriber}),this.state.showPublisher&&r.a.createElement("div",{id:"publisher-container",className:e.publisherContainer},r.a.createElement("div",{id:"publisher",className:e.publisher})),r.a.createElement("div",{className:e.sidePanel},r.a.createElement(Pe.a,{className:e.sidePanelButton,onClick:a?function(){}:this.initializeSession,style:{color:a?"#4caf50":"white"}},r.a.createElement(hn.a,null)),r.a.createElement(pn,{visibleControls:n,onVisibilityChange:this.handleControlVisibilityChange})),r.a.createElement("div",{className:e.controlsContainer},n.armJoystick&&r.a.createElement(qa,{publish:this.publishMqtt}),n.arm6DOF&&r.a.createElement(za,null),n.sixDoFArm&&r.a.createElement(cn,null),n.dpad&&r.a.createElement(rn,{publish:this.publishMqtt}),n.driveControls&&r.a.createElement(Ya,{publish:this.publishMqtt}))))}}]),t}(r.a.Component),vn=Object(E.withStyles)(function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-around",height:"100%",width:"100%",padding:0,boxSizing:"border-box"},videos:{display:"flex",position:"relative",width:"100%",height:"100%",backgroundColor:"black"},subscriber:{position:"absolute",left:0,top:0,width:"100%",height:"100%",zIndex:1,backgroundImage:"url(/assets/poster.png)",backgroundSize:"cover",backgroundPosition:"center"},publisherContainer:{position:"absolute",right:"10px",bottom:"10px",width:"120px",height:"90px",zIndex:2,border:"2px solid white",borderRadius:"5px",overflow:"hidden"},publisher:{width:"100%",height:"100%"},connectContainer:{position:"absolute",top:e.spacing.unit,left:e.spacing.unit,zIndex:10},sidePanel:{position:"absolute",top:0,right:0,height:"100%",zIndex:12,display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"center",padding:"0 ".concat(e.spacing.unit,"px"),paddingBottom:4*e.spacing.unit,backgroundColor:"rgba(0, 0, 0, 0.6)",transform:"translateX(80%)",transition:"transform 0.3s ease-in-out","&:hover":{transform:"translateX(0)"}},sidePanelButton:{margin:"".concat(e.spacing.unit,"px 0")},controlsContainer:{position:"absolute",bottom:4*e.spacing.unit,left:0,width:"100%",zIndex:10,display:"flex",justifyContent:"space-around",color:"white"},joystickContainer:{display:"flex",flexDirection:"column",alignItems:"center"},joystickBase:{fill:"rgba(224, 224, 224, 0.4)",stroke:"rgba(189, 189, 189, 0.6)",strokeWidth:2},joystickAxis:{stroke:"rgba(255, 255, 255, 0.3)",strokeWidth:1,strokeDasharray:"2 2"}}})(gn),fn=a(434),En=a.n(fn),bn=a(435),yn=a.n(bn),Cn=a(436),wn=a.n(Cn),kn=["Robot","Drone","Vehicle"],Sn=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).getInitialState=function(e){return{id:e?e.vehicleID:"",name:e&&e.name||"",type:e&&e.type||"Robot",location:e?"".concat(e.lat||"",", ").concat(e.long||""):""}},a.handleChange=function(e){return function(t){a.setState(Object(L.a)({},e,t.target.value))}},a.handleSave=function(){console.log("Saving device:",a.state),alert("Saving device: ".concat(a.state.name||a.state.id)),a.props.onClose()},a.state=a.getInitialState(e.device),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.device!==e.device&&this.setState(this.getInitialState(this.props.device))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.open,n=e.onClose,i=e.device,o=this.state,l=o.id,s=o.name,c=o.type,d=o.location,h=!!i;return r.a.createElement(qe.a,{open:a,onClose:n,"aria-labelledby":"device-form-dialog-title"},r.a.createElement(Ze.a,{id:"device-form-dialog-title"},h?"Edit Device":"Add New Device"),r.a.createElement(Ke.a,{className:t.dialogContent},r.a.createElement(Ta.a,{label:"Device ID",value:l,onChange:this.handleChange("id"),fullWidth:!0,className:t.textField,disabled:h,helperText:h?"ID cannot be changed.":"Unique identifier for the device."}),r.a.createElement(Ta.a,{label:"Name",value:s,onChange:this.handleChange("name"),fullWidth:!0,className:t.textField}),r.a.createElement(Ta.a,{select:!0,label:"Type",value:c,onChange:this.handleChange("type"),fullWidth:!0,className:t.textField},kn.map(function(e){return r.a.createElement(Yt.a,{key:e,value:e},e)})),r.a.createElement(Ta.a,{label:"Location (Lat, Lng)",value:d,onChange:this.handleChange("location"),fullWidth:!0,className:t.textField})),r.a.createElement(Ye.a,null,r.a.createElement(We.a,{onClick:n,color:"secondary"},"Cancel"),r.a.createElement(We.a,{onClick:this.handleSave,color:"primary",variant:"contained"},"Save")))}}]),t}(r.a.Component);Sn.defaultProps={device:null};var On,jn=Object(E.withStyles)(function(e){return{dialogContent:{minWidth:400},textField:{marginBottom:2*e.spacing.unit}}})(Sn),Mn=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).state={formOpen:!1,deviceToEdit:null},a.handleToggle=function(e){return function(){console.log("Toggle visibility for device ".concat(e))}},a.handleEdit=function(e){return function(){console.log("Editing device:",e),a.setState({formOpen:!0,deviceToEdit:e})}},a.handleDelete=function(e){return function(){console.log("Deleting device:",e),window.confirm("Are you sure you want to delete device ".concat(e,"?"))&&alert("Deleting device: ".concat(e))}},a.handleAdd=function(){console.log("Adding new device"),a.setState({formOpen:!0,deviceToEdit:null})},a.handleFormClose=function(){a.setState({formOpen:!1,deviceToEdit:null})},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.onClose,i=t.open,o=t.devices,l=this.state,s=l.formOpen,c=l.deviceToEdit,d=new Map;o.forEach(function(e){e.vehicleID&&d.set(e.vehicleID,e)});var h=Array.from(d.values());return r.a.createElement(r.a.Fragment,null,r.a.createElement(qe.a,{open:i,onClose:n,"aria-labelledby":"device-manager-dialog-title"},r.a.createElement(Ze.a,{id:"device-manager-dialog-title"},"Device Management"),r.a.createElement(Ke.a,{className:a.dialogContent},r.a.createElement(et.a,null,h.map(function(t){return r.a.createElement(at.a,{key:t.vehicleID},r.a.createElement(it.a,{primary:"Device ID: ".concat(t.vehicleID),secondary:"Last seen: ".concat(new Date(t.timestamp).toLocaleString())}),r.a.createElement(ot.a,null,r.a.createElement(st.a,{onChange:e.handleToggle(t.vehicleID),defaultChecked:!0}),r.a.createElement(Pe.a,{"aria-label":"Edit",onClick:e.handleEdit(t)},r.a.createElement(En.a,null)),r.a.createElement(Pe.a,{"aria-label":"Delete",onClick:e.handleDelete(t.vehicleID)},r.a.createElement(yn.a,null))))}))),r.a.createElement(Ye.a,null,r.a.createElement(We.a,{onClick:this.handleAdd,color:"primary",variant:"contained",className:a.addButton},r.a.createElement(wn.a,null),"Add New Device"),r.a.createElement(We.a,{onClick:n,color:"primary"},"Close"))),r.a.createElement(jn,{open:s,onClose:this.handleFormClose,device:c}))}}]),t}(r.a.Component),Dn=Object(E.withStyles)(function(e){return{dialogContent:{minWidth:500},addButton:{margin:e.spacing.unit}}})(Mn),xn="mars-geo-tracker-config",Tn=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).loadSettings=function(){try{var e=localStorage.getItem(xn);if(e)return JSON.parse(e)}catch(t){console.error("Error loading settings from local storage:",t)}return{SAMPLE_SERVER_BASE_URL:Ia,APPLICATION_ID:Aa,SESSION_ID:La,TOKEN:Ra,MQTT_HOST:_a,MQTT_USERNAME:Ba.username,MQTT_PASSWORD:Ba.password,MQTT_PATH:Ba.path,DRIVE_MQTT_TOPIC:Va,ARM_MQTT_TOPIC:Fa,GRIPPER_MQTT_TOPIC:Wa}},a.handleChange=function(e){return function(t){a.setState(Object(L.a)({},e,t.target.value))}},a.handleSave=function(){try{localStorage.setItem(xn,JSON.stringify(a.state)),alert("Settings saved! Please refresh the page for them to take effect."),a.props.onClose()}catch(e){console.error("Error saving settings to local storage:",e),alert("Failed to save settings.")}},a.state=a.loadSettings(),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.open,n=e.onClose;return r.a.createElement(qe.a,{open:a,onClose:n,"aria-labelledby":"server-settings-dialog-title"},r.a.createElement(Ze.a,{id:"server-settings-dialog-title"},"Server Settings"),r.a.createElement(Ke.a,{className:t.dialogContent},r.a.createElement(zt.a,{variant:"h6",className:t.sectionTitle},"Video Server"),r.a.createElement(Ta.a,{label:"Video Server URL",value:this.state.SAMPLE_SERVER_BASE_URL,onChange:this.handleChange("SAMPLE_SERVER_BASE_URL"),fullWidth:!0,className:t.textField}),r.a.createElement(Ta.a,{label:"Vonage App ID",value:this.state.APPLICATION_ID,onChange:this.handleChange("APPLICATION_ID"),fullWidth:!0,className:t.textField}),r.a.createElement(Ta.a,{label:"Vonage Session ID",value:this.state.SESSION_ID,onChange:this.handleChange("SESSION_ID"),fullWidth:!0,className:t.textField}),r.a.createElement(Ta.a,{label:"Vonage Token",value:this.state.TOKEN,onChange:this.handleChange("TOKEN"),fullWidth:!0,className:t.textField,multiline:!0}),r.a.createElement(zt.a,{variant:"h6",className:t.sectionTitle},"MQTT Server"),r.a.createElement(Ta.a,{label:"MQTT Host",value:this.state.MQTT_HOST,onChange:this.handleChange("MQTT_HOST"),fullWidth:!0,className:t.textField}),r.a.createElement(Ta.a,{label:"MQTT Username",value:this.state.MQTT_USERNAME,onChange:this.handleChange("MQTT_USERNAME"),fullWidth:!0,className:t.textField}),r.a.createElement(Ta.a,{label:"MQTT Password",value:this.state.MQTT_PASSWORD,onChange:this.handleChange("MQTT_PASSWORD"),fullWidth:!0,className:t.textField,type:"password"}),r.a.createElement(Ta.a,{label:"MQTT Path",value:this.state.MQTT_PATH,onChange:this.handleChange("MQTT_PATH"),fullWidth:!0,className:t.textField}),r.a.createElement(zt.a,{variant:"h6",className:t.sectionTitle},"MQTT Topics"),r.a.createElement(Ta.a,{label:"Drive Topic",value:this.state.DRIVE_MQTT_TOPIC,onChange:this.handleChange("DRIVE_MQTT_TOPIC"),fullWidth:!0,className:t.textField}),r.a.createElement(Ta.a,{label:"Arm Topic",value:this.state.ARM_MQTT_TOPIC,onChange:this.handleChange("ARM_MQTT_TOPIC"),fullWidth:!0,className:t.textField}),r.a.createElement(Ta.a,{label:"Gripper Topic",value:this.state.GRIPPER_MQTT_TOPIC,onChange:this.handleChange("GRIPPER_MQTT_TOPIC"),fullWidth:!0,className:t.textField})),r.a.createElement(Ye.a,null,r.a.createElement(We.a,{onClick:n,color:"secondary"},"Cancel"),r.a.createElement(We.a,{onClick:this.handleSave,color:"primary",variant:"contained"},"Save")))}}]),t}(r.a.Component),Pn=Object(E.withStyles)(function(e){return{dialogContent:{minWidth:500},textField:{marginBottom:2*e.spacing.unit},sectionTitle:{marginTop:2*e.spacing.unit,marginBottom:e.spacing.unit}}})(Tn),Nn=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleDrawerOpen=function(){a.setState({open:!0})},a.handleDrawerClose=function(){a.setState({open:!1})},a.handleTabChange=function(e,t){a.setState({tabIndex:t})},a.handleSubmit=function(e,t){a.state.realtime&&a.setState({realtime:!1}),e&&t&&(console.log("from-to"+e+"-"+t),e=a.getISODateString(e),t=a.getISODateString(t),console.log("from-to"+e+"-"+t),e.trim()&&t.trim()&&(a.props.actions.fetchVehicles(e.trim(),t.trim()),a.handleReset(),a.stopPlayMap()))},a.handleReset=function(){a.setState({dtFrom:"",dtTo:""})},a.handleRealTime=function(e){console.log("RT Toggled:",e),a.setState({realtime:e})},a.handleSlideClick=function(e){console.log("pos ".concat(e)),a.stopPlayMap(),a.setMarker(e)},a.handleMediaControlChange=function(e){console.log("media",e),a.stopPlayMap();var t=a.state.marker,n=(a.props.vehicles.vehicles||[]).length;switch(console.log("mediamarker ".concat(t," , len= ").concat(n-1)),e){case 0:t=0;break;case-1:t=t-1>0?t-1:0;break;case-5:return void a.stopPlayMap();case 5:return void a.playMap(t);case 1:t=t+1<n?t+1:n-1;break;case 9:t=n-1;break;default:return}console.log("num  ".concat(t)),a.setMarker(t)},a.handleDeviceManagerOpen=function(){a.setState({deviceManagerOpen:!0})},a.handleDeviceManagerClose=function(){a.setState({deviceManagerOpen:!1})},a.handleServerSettingsOpen=function(){a.setState({serverSettingsOpen:!0})},a.handleServerSettingsClose=function(){a.setState({serverSettingsOpen:!1})},a.state={open:!1,realtime:!1,rtcolor:"#000",dtFrom:(new Date).toISOString(),dtTo:(new Date).toISOString(),marker:0,vLength:0,didMount:!1,tabIndex:0,deviceManagerOpen:!1,serverSettingsOpen:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({didMount:!0}),(On=ee.io.connect("http://localhost:5000")).on("connect",function(e){console.log("It worked")}),On.on("vehicles_update",function(t){console.log("vehicles_update",t);var a=[];a.push(t),e.props.actions.updateVehicles(a)})}},{key:"componentWillReceiveProps",value:function(e){console.log("compwill-receive props"),this.setState({marker:0})}},{key:"pad",value:function(e){return e<10?"0"+e:e}},{key:"getISODateString",value:function(e){return(e=new Date(e)).getUTCFullYear()+"-"+this.pad(e.getUTCMonth()+1)+"-"+this.pad(e.getUTCDate())+"T"+this.pad(e.getHours())+":"+this.pad(e.getMinutes())+":"+this.pad(e.getSeconds())}},{key:"playMap",value:function(e){var t=this;if(this.state.didMount&&e>=0){var a=(this.props.vehicles.vehicles||[]).length;if(0===a)return;var n=e,i=function(){t.setMarker(n),n=(n+1)%a};this.stopPlayMap(),i(),this.setLoop=setInterval(i,1e3)}}},{key:"stopPlayMap",value:function(){this.setLoop&&clearInterval(this.setLoop)}},{key:"setMarker",value:function(e){console.log("setMarker",e),this.setState(function(){return{marker:e}})}},{key:"render",value:function(){var e,t=this.props.classes,a=this.props.vehicles.vehicles||[],n=this.state,i=n.realtime,o=n.marker,l=n.tabIndex;return console.log("marker....",o),o>=0&&(e=a.length>0&&a[o]?a[o].timestamp:o),r.a.createElement("div",{className:t.pageContainer},r.a.createElement(V.a,null),r.a.createElement(Ca,{submit:this.handleSubmit,realtimeclick:this.handleRealTime,realtime:i,onOpenServerSettings:this.handleServerSettingsOpen}),r.a.createElement(G.a,{container:!0,className:t.root,spacing:0},r.a.createElement(G.a,{item:!0,xs:8,className:t.demo},r.a.createElement(W.a,{className:t.mapContainer},r.a.createElement(Et,{submit:this.handleSubmit,rtcolor:i?{backgroundColor:"#18ffff"}:{backgroundColor:"red"},realtime:this.handleRealTime,pos:o,onOpenDeviceManager:this.handleDeviceManagerOpen})),r.a.createElement(W.a,{className:t.videoContainer},r.a.createElement(vn,null)),r.a.createElement("div",{className:t.controlsContainer},r.a.createElement(Bt,{max:a.length-1,value:o,click:this.handleSlideClick,MediaControlChange:this.handleMediaControlChange}))),r.a.createElement(G.a,{container:!0,className:t.rside,item:!0,xs:4},r.a.createElement(Q.a,{className:t.tabs1,value:l,onChange:this.handleTabChange,variant:"scrollable",scrollButtons:"auto",centered:"false",indicatorColor:"primary",textColor:"primary"},r.a.createElement(H.a,{key:"tab1",icon:r.a.createElement(J.a,null)}),r.a.createElement(H.a,{key:"tab2",icon:r.a.createElement(X.a,null)}),r.a.createElement(H.a,{key:"tab3",icon:r.a.createElement($.a,null)})),r.a.createElement("div",{style:{flex:1,overflowY:"auto",width:"100%"}},0===l&&r.a.createElement(ka,{pos:e,handleSubmit:this.handleSubmit}),1===l&&r.a.createElement(Ma,null),2===l&&r.a.createElement(Na,{pos:e,handleSubmit:this.handleSubmit}))),r.a.createElement(Dn,{open:this.state.deviceManagerOpen,onClose:this.handleDeviceManagerClose,devices:a}),r.a.createElement(Pn,{open:this.state.serverSettingsOpen,onClose:this.handleServerSettingsClose})))}}]),t}(r.a.Component),In=Object(E.withStyles)(function(e){return{pageContainer:{display:"flex",flexDirection:"column",height:"100vh"},root:{flex:1,overflow:"hidden",width:"100%"},demo:{height:"100%",width:"100%",padding:e.spacing.unit,display:"flex",flexDirection:"column",overflow:"auto"},mapContainer:{flex:1,position:"relative",display:"flex",minHeight:0},videoContainer:{flex:1,minHeight:0,overflowY:"auto",marginTop:e.spacing.unit},controlsContainer:{flex:"0 0 auto"},rside:{height:"100%",width:"100%",display:"flex",flexDirection:"column"},center:{textAlign:"center"},Paper:{border:0,padding:2*e.spacing.unit,height:"27%",textAlign:"left",color:e.palette.text.secondary,margin:"0 2px 2px "},control:{padding:2*e.spacing.unit},card:{minWidth:2},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:12},pos:{marginBottom:12},toolbar:{paddingRight:24},toolbarIcon:Object(C.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),chartContainer:{marginLeft:-22},tableContainer:{width:"100%",height:"70%"},tabs1:{height:"30px"},h5:{marginBottom:2*e.spacing.unit},button:Object(L.a)({margin:e.spacing.unit},"margin","0 0 0 12px")}})(Object(g.connect)(function(e){return{vehicles:e.vehicles}},function(e,t){return{actions:Object(p.bindActionCreators)(n,e)}})(Nn)),An=Object(E.createMuiTheme)({palette:{primary:y.a,secondary:{main:"#ffeb3b"}}}),Ln=Object(p.createStore)(A,Object(p.applyMiddleware)(m.a)),Rn=(Math.floor(10*Math.random()+1),r.a.createElement(E.MuiThemeProvider,{theme:An},r.a.createElement(v.b,{utils:f.a},r.a.createElement(g.Provider,{store:Ln},r.a.createElement(In,null))))),_n=function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return Rn}}]),t}(i.Component);l.a.render(r.a.createElement(_n,null),document.querySelector("#root"))}},[[445,2,1]]]);
//# sourceMappingURL=main.6434f227.chunk.js.map